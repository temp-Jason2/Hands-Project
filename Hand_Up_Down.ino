// Program to demonstrate the MD_Parola library
//
// Simplest program that does something useful - Hello World!
//
// MD_MAX72XX library can be found at https://github.com/MajicDesigns/MD_MAX72XX
//

#include <MD_Parola.h>
#include <MD_MAX72xx.h>
#include <SPI.h>

// Define the number of devices we have in the chain and the hardware interface
// NOTE: These pin numbers will probably not work with your hardware and may
// need to be adapted
#define HARDWARE_TYPE MD_MAX72XX::FC16_HW
#define MAX_DEVICES 16

#define CLK_PIN   10
#define DATA_PIN  8
#define CS_PIN    9


// Hardware SPI connection
//MD_Parola P = MD_Parola(HARDWARE_TYPE, CS_PIN, MAX_DEVICES);
// Arbitrary output pins
MD_Parola P = MD_Parola(HARDWARE_TYPE, DATA_PIN, CLK_PIN, CS_PIN, MAX_DEVICES);
bool isUp = false;
bool firstPress = true;
bool pressed = 0;
 
MD_MAX72XX::fontType_t yes[] PROGMEM = 
{
	0, 	// 0  - 'NUL'
	0, 	// 1  - 'SOH'
	0, 	// 2  - 'STX'
	0, 	// 3  - 'ETX'
	0, 	// 4  - 'EOT'
	0, 	// 5  - 'ENQ'
	0, 	// 6  - 'ACK'
	0, 	// 7  - 'BEL'
	0, 	// 8  - 'BS'
	0, 	// 9  - 'HT'
	0, 	// 10  - 'LF'
	0, 	// 11  - 'VT'
	0, 	// 12  - 'FF'
	0, 	// 13  - 'CR'
	0, 	// 14  - 'SO'
	0, 	// 15  - 'SI'
	0, 	// 16  - 'DLE'
	0, 	// 17  - 'DC1'
	0, 	// 18  - 'DC2'
	0, 	// 19  - 'DC3'
	0, 	// 20  - 'DC4'
	0, 	// 21  - 'NAK'
	0, 	// 22  - 'SYN'
	0, 	// 23  - 'ETB'
	0, 	// 24  - 'CAN'
	0, 	// 25  - 'EM'
	0, 	// 26  - 'SUB'
	0, 	// 27  - 'ESC'
	0, 	// 28  - 'FS'
	0, 	// 29  - 'GS'
	0, 	// 30  - 'RS'
	0, 	// 31  - 'US'
	0, 	// 32  - 'SPACE'
	8, 0, 109, 109, 96, 96, 109, 109, 0, 	// 33  - '!'
	8, 193, 127, 76, 162, 162, 76, 127, 193, 	// 34  - '"'
	8, 96, 120, 240, 79, 79, 240, 120, 96, 	// 35  - '#'
	8, 195, 165, 90, 36, 36, 90, 165, 195, 	// 36  - '$'
	0, 	// 37  - '%'
	0, 	// 38  - '&'
	0, 	// 39  - ''
	0, 	// 40  - '('
	0, 	// 41  - ')'
	0, 	// 42  - '*'
	0, 	// 43  - '+'
	0, 	// 44'
	0, 	// 45  - '-'
	0, 	// 46  - '.'
	0, 	// 47  - '/'
	8, 0, 0, 0, 0, 0, 0, 0, 0, 	// 48  - '0'
	0, 	// 49  - '1'
	8, 124, 130, 130, 130, 124, 0, 0, 0, 	// 50  - '2'
	8, 0, 146, 146, 146, 254, 0, 0, 0, 	// 51  - '3'
	8, 0, 48, 40, 36, 254, 32, 32, 0, 	// 52  - '4'
	0, 	// 53  - '5'
	8, 0, 254, 146, 146, 242, 0, 0, 0, 	// 54  - '6'
	0, 	// 55  - '7'
	0, 	// 56  - '8'
	0, 	// 57  - '9'
	0, 	// 58  - ':'
	0, 	// 59  - ';'
	0, 	// 60  - '<'
	0, 	// 61  - '='
	0, 	// 62  - '>'
	0, 	// 63  - '?'
	0, 	// 64  - '@'
	8, 0, 0, 0, 0, 0, 0, 0, 0, 	// 65  - 'A'
	8, 7, 8, 8, 8, 8, 8, 8, 8, 	// 66  - 'B'
	8, 8, 8, 8, 8, 15, 0, 0, 0, 	// 67  - 'C'
	8, 0, 0, 0, 0, 0, 0, 0, 0, 	// 68  - 'D'
	8, 0, 0, 0, 0, 0, 0, 15, 240, 	// 69  - 'E'
	8, 0, 0, 0, 0, 0, 0, 0, 0, 	// 70  - 'F'
	8, 0, 0, 1, 1, 192, 48, 12, 2, 	// 71  - 'G'
	8, 1, 0, 0, 0, 0, 0, 0, 0, 	// 72  - 'H'
	8, 0, 0, 0, 0, 0, 0, 254, 1, 	// 73  - 'I'
	8, 1, 63, 0, 0, 63, 0, 0, 63, 	// 74  - 'J'
	8, 0, 0, 255, 0, 128, 64, 32, 16, 	// 75  - 'K'
	8, 16, 208, 32, 0, 0, 0, 0, 0, 	// 76  - 'L'
	8, 0, 0, 0, 0, 0, 0, 0, 0, 	// 77  - 'M'
	8, 0, 128, 64, 64, 224, 16, 16, 224, 	// 78  - 'N'
	8, 64, 64, 128, 0, 0, 0, 0, 0, 	// 79  - 'O'
	8, 0, 0, 0, 0, 0, 0, 0, 0, 	// 80  - 'P'
	0, 	// 81  - 'Q'
	0, 	// 82  - 'R'
	0, 	// 83  - 'S'
	0, 	// 84  - 'T'
	0, 	// 85  - 'U'
	0, 	// 86  - 'V'
	0, 	// 87  - 'W'
	0, 	// 88  - 'X'
	0, 	// 89  - 'Y'
	0, 	// 90  - 'Z'
	0, 	// 91  - '['
	0, 	// 92  - ''
	0, 	// 93  - ']'
	0, 	// 94  - '^'
	0, 	// 95  - '_'
	0, 	// 96  - '`'
	0, 	// 97  - 'a'
	0, 	// 98  - 'b'
	0, 	// 99  - 'c'
	0, 	// 100  - 'd'
	0, 	// 101  - 'e'
	0, 	// 102  - 'f'
	0, 	// 103  - 'g'
	0, 	// 104  - 'h'
	0, 	// 105  - 'i'
	0, 	// 106  - 'j'
	0, 	// 107  - 'k'
	0, 	// 108  - 'l'
	0, 	// 109  - 'm'
	0, 	// 110  - 'n'
	0, 	// 111  - 'o'
	0, 	// 112  - 'p'
	0, 	// 113  - 'q'
	0, 	// 114  - 'r'
	0, 	// 115  - 's'
	0, 	// 116  - 't'
	0, 	// 117  - 'u'
	0, 	// 118  - 'v'
	0, 	// 119  - 'w'
	0, 	// 120  - 'x'
	0, 	// 121  - 'y'
	0, 	// 122  - 'z'
	0, 	// 123  - '{'
	0, 	// 124  - '|'
	0, 	// 125  - '}'
	0, 	// 126  - '~'
	0, 	// 127  - ''
	0, 	// 128  - '€'
	0, 	// 129  - ''
	0, 	// 130  - '‚'
	0, 	// 131  - 'ƒ'
	0, 	// 132  - '„'
	0, 	// 133  - '…'
	0, 	// 134  - '†'
	0, 	// 135  - '‡'
	0, 	// 136  - 'ˆ'
	0, 	// 137  - '‰'
	0, 	// 138  - 'Š'
	0, 	// 139  - '‹'
	0, 	// 140  - 'Œ'
	0, 	// 141  - ''
	0, 	// 142  - 'Ž'
	0, 	// 143  - ''
	0, 	// 144  - ''
	0, 	// 145  - '‘'
	0, 	// 146  - '’'
	0, 	// 147  - '“'
	0, 	// 148  - '”'
	0, 	// 149  - '•'
	0, 	// 150  - '–'
	0, 	// 151  - '—'
	0, 	// 152  - '˜'
	0, 	// 153  - '™'
	0, 	// 154  - 'š'
	0, 	// 155  - '›'
	0, 	// 156  - 'œ'
	0, 	// 157  - ''
	0, 	// 158  - 'ž'
	0, 	// 159  - 'Ÿ'
	0, 	// 160  - ''
	0, 	// 161  - '¡'
	0, 	// 162  - '¢'
	0, 	// 163  - '£'
	0, 	// 164  - '¤'
	0, 	// 165  - '¥'
	0, 	// 166  - '¦'
	0, 	// 167  - '§'
	0, 	// 168  - '¨'
	0, 	// 169  - '©'
	0, 	// 170  - 'ª'
	0, 	// 171  - '«'
	0, 	// 172  - '¬'
	0, 	// 173  - '­'
	0, 	// 174  - '®'
	0, 	// 175  - '¯'
	0, 	// 176  - '°'
	0, 	// 177  - '±'
	0, 	// 178  - '²'
	0, 	// 179  - '³'
	0, 	// 180  - '´'
	0, 	// 181  - 'µ'
	0, 	// 182  - '¶'
	0, 	// 183  - '·'
	0, 	// 184  - '¸'
	0, 	// 185  - '¹'
	0, 	// 186  - 'º'
	0, 	// 187  - '»'
	0, 	// 188  - '¼'
	0, 	// 189  - '½'
	0, 	// 190  - '¾'
	0, 	// 191  - '¿'
	0, 	// 192  - 'À'
	0, 	// 193  - 'Á'
	0, 	// 194  - 'Â'
	0, 	// 195  - 'Ã'
	0, 	// 196  - 'Ä'
	0, 	// 197  - 'Å'
	0, 	// 198  - 'Æ'
	0, 	// 199  - 'Ç'
	0, 	// 200  - 'È'
	0, 	// 201  - 'É'
	0, 	// 202  - 'Ê'
	0, 	// 203  - 'Ë'
	0, 	// 204  - 'Ì'
	0, 	// 205  - 'Í'
	0, 	// 206  - 'Î'
	0, 	// 207  - 'Ï'
	0, 	// 208  - 'Ð'
	0, 	// 209  - 'Ñ'
	0, 	// 210  - 'Ò'
	0, 	// 211  - 'Ó'
	0, 	// 212  - 'Ô'
	0, 	// 213  - 'Õ'
	0, 	// 214  - 'Ö'
	0, 	// 215  - '×'
	0, 	// 216  - 'Ø'
	0, 	// 217  - 'Ù'
	0, 	// 218  - 'Ú'
	0, 	// 219  - 'Û'
	0, 	// 220  - 'Ü'
	0, 	// 221  - 'Ý'
	0, 	// 222  - 'Þ'
	0, 	// 223  - 'ß'
	0, 	// 224  - 'à'
	0, 	// 225  - 'á'
	0, 	// 226  - 'â'
	0, 	// 227  - 'ã'
	0, 	// 228  - 'ä'
	0, 	// 229  - 'å'
	0, 	// 230  - 'æ'
	0, 	// 231  - 'ç'
	0, 	// 232  - 'è'
	0, 	// 233  - 'é'
	0, 	// 234  - 'ê'
	0, 	// 235  - 'ë'
	0, 	// 236  - 'ì'
	0, 	// 237  - 'í'
	0, 	// 238  - 'î'
	0, 	// 239  - 'ï'
	0, 	// 240  - 'ð'
	0, 	// 241  - 'ñ'
	0, 	// 242  - 'ò'
	0, 	// 243  - 'ó'
	0, 	// 244  - 'ô'
	0, 	// 245  - 'õ'
	0, 	// 246  - 'ö'
	0, 	// 247  - '÷'
	0, 	// 248  - 'ø'
	0, 	// 249  - 'ù'
	0, 	// 250  - 'ú'
	0, 	// 251  - 'û'
	0, 	// 252  - 'ü'
	0, 	// 253  - 'ý'
	0, 	// 254  - 'þ'
	0, 	// 255
};



void setup(void)
{
	pinMode(2,INPUT);
	pinMode(6, OUTPUT);
  	P.begin();
	P.setFont(yes);
  	P.setCharSpacing(0);
}

void up()
{
	P.displayText("ABCDEFGHIJKLMNOP", PA_CENTER, 100, 1000, PA_SCROLL_UP, PA_NO_EFFECT);
}

void down()
{
	P.displayText("ABCDEFGHIJKLMNOP", PA_CENTER, 100, 1000, PA_NO_EFFECT, PA_SCROLL_DOWN);
}



void loop(void)
{
	if (millis() % 2000 < 1750 || isUp || firstPress) {
		digitalWrite(6, LOW);
	} else if (!isUp) {
		digitalWrite(6, HIGH);
	}

  	if (digitalRead(2) == HIGH || pressed){
		pressed = true;
		firstPress = false;
		if (!isUp && P.displayAnimate()) {
			up();
			isUp = true;
			pressed = false;
		} else if (isUp && P.displayAnimate()) {
			down();
			isUp = false;
			pressed = false;
		}
	}
} // 
